<!DOCTYPE html>
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <link rel="stylesheet" href="">
</head>

<body>
    <div>
        <form>
            <div>
                <p id="msgValidacao"></p>

                <p>Usuário</p>
                <input type="text" id="usuario" name="usuario" placeholder="Digite seu usuário..." />

                <p>Senha</p>
                <input type="password" id="pass" name="pass" placeholder="Digite sua senha ....">
                <p></p>

                <button type="submit" id="botaoLogin" name="botaoLogin">Entrar</button>

            </div>


        </form>

    </div>


    <script>

        document.getElementById("botaoLogin").addEventListener("click", function (event) {
            event.preventDefault();

            var formData = new FormData();

            var usuario = document.getElementById("usuario").value;
            var pass = document.getElementById("pass").value;
            

            formData.append("usuario", usuario);
            formData.append("pass", pass);

            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function () {

                if (xhr.readyState == 4) {
                    var resposta = xhr.responseText;
                    console.log(resposta)

                    //talvez sirva para recarregar a pagina
                    xhr.onload = function () {
                        if (resposta === "401") {
                            var msgValidacao = document.getElementById("msgValidacao");
                            msgValidacao.innerHTML = "ATENÇÃO: Usuário ou Senha Inválidos!"
    
                            
                        }
                    }


                    //  document.write(Date());



                }
            }

            xhr.open("POST", "http://localhost:8080/api/autenticar");
            xhr.send(formData);

            // location.reload()


        });



    </script>
</body>

</html>