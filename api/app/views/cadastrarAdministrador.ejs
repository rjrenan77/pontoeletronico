<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Painel - Sistema de Ponto CRO-RJ</title>
</head>

<body>

    <form>


        <p id="msgValidacao"></p>

        <label>Nome: </label><input type="text" id="nome" name="nome" placeholder="Digite seu nome completo..." />
        <label>Matrícula: </label><input type="text" id="matricula" name="matricula"
            placeholder="Digite sua matrícula..." />
        <label>Função: </label><input type="text" id="funcao" name="funcao" placeholder="Digite sua função..." />
        <label>Usuário: </label><input type="text" id="usuario" name="usuario" placeholder="Digite seu usuário..." />

        <label>Senha: </label><input type="text" id="senha" name="senha" placeholder="Digite uma senha..." />
        <label>Confirmação de Senha: </label><input type="text" id="confirmaSenha" name="confirmaSenha"
            placeholder="Confirme sua senha..." />

        <button type="submit" id="botaoCadastro" name="botaoCadastro">Cadastrar</button>


    </form>

    <script>

        document.getElementById("botaoCadastro").addEventListener("click", function (event) {
            event.preventDefault();

            var formData = new FormData();

            var nome = document.getElementById("nome").value;
            var matricula = document.getElementById("matricula").value;
            var funcao = document.getElementById("funcao").value;
            var usuario = document.getElementById("usuario").value;
            var senha = document.getElementById("senha").value;
            var confirmaSenha = document.getElementById("confirmaSenha").value;


            formData.append("nome", nome);
            formData.append("matricula", matricula);
            formData.append("funcao", funcao);
            formData.append("usuario", usuario);

            formData.append("senha", senha);
            formData.append("confirmaSenha", confirmaSenha);


            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function () {

                if (xhr.readyState == 4) {
                    var resposta = xhr.responseText;
                    console.log(resposta)

                    //talvez sirva para recarregar a pagina
                    xhr.onload = function () {
                        if (resposta === "invalido") {
                            var msgValidacao = document.getElementById("msgValidacao");
                            msgValidacao.innerHTML = "ATENÇÃO: Há campos vazios ou inválidos!"


                        }

                    }


                    //  document.write(Date());



                }
            }

            xhr.open("POST", "http://localhost:8080/painel/cadastraAdministrador");
            xhr.send(formData);

            // location.reload()


        });

    </script>
</body>

</html>